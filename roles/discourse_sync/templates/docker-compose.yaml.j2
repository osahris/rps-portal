---
version: "3"

networks:
  proxy:
    external: true
  internal:

services:
  discourse_sync:
    image: {{ discourse_sync_container_image }}:{{ discourse_sync_container_version }}
    restart: unless-stopped
    networks:
      - proxy
    profiles:
      - sync
    volumes:
      - ./config.yaml:/opt/rps-admin-tools/config.yaml:ro
    entrypoint: ''
    environment:
      - SLEEP_MINUTES=1
    command: /opt/rps-admin-tools/command_loop.sh -c /opt/rps-admin-tools/config.yaml sync discourse --verbose