---

- name: create directory
  file: path={{remote_path}} state=directory

- name: create skel directory
  file: path={{remote_path}}/skel state=directory

- name: create skel directory
  file: path={{remote_path}}/theme state=directory

- name: copy occ script
  ansible.builtin.copy:
    src: occ.sh
    dest: "{{ remote_path }}/occ.sh"
    mode: 0755

- name: 'clone the nextcloud header injection repo'
  git:
    repo: "{{nextcloud_header_injection_repo}}"
    dest: "{{remote_path}}/rps-nextcloud-header-injection"
    version: "main"
    single_branch: true
    force: false
    depth: 1
  when: nextcloud_with_header_injection

