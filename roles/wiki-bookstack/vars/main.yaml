---
# Ansible variables
remote_path: "/srv/{{wiki_bookstack_service_name}}"

# # ------------------------------------------ #
wiki_DB_DATABASE: "bookstackapp"
wiki_DB_USER: "bookstack"
wiki_DB_PASS: "{{wiki_bookstack_db_admin_password}}"

keycloak_host: "keycloak.{{inventory_hostname}}" # "accounts.idcohorts.net"
keycloak_realm: "rps"

app_port: "80"

# For each new running service add below a traefik router and a traefik service
traefik_dynamic_config:
  http:
    routers:
      wiki-bookstack:
        rule: "Host(`{{wiki_bookstack_service_name}}`)"
        entrypoints: websecure
        middlewares:
        - header-redirect
        tls:
          certresolver: letsencrypt
        service: wiki-bookstack

    services:
      wiki-bookstack:
        loadBalancer:
          servers:
            - url: "http://{{wiki_bookstack_service_name | replace('.','')}}_wiki-bookstack_1:{{app_port}}" # "http://container_name:container_port"
