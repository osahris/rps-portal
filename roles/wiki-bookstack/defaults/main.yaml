---
wiki_bookstack_service_name: "wiki.{{ rps_dns_suffix }}"

wiki_bookstack_keycloak_client_auth_client_id: admin-cli
wiki_bookstack_keycloak_client_auth_keycloak_url: keycloak.{{inventory_hostname}}
wiki_bookstack_keycloak_client_auth_realm: master
wiki_bookstack_keycloak_client_auth_username: admin
wiki_bookstack_keycloak_client_auth_password: "{{ keycloak_admin_password }}"
wiki_bookstack_keycloak_client_client_id: "{{ wiki_bookstack_service_name }}"
wiki_bookstack_keycloak_client_realm:  "{{ keycloak_realm }}"
wiki_bookstack_keycloak_client_redirect_uris: https://{{ wiki_bookstack_service_name }}/*
wiki_bookstack_keycloak_client_validate_certs: true

wiki_bookstack_secrets:
  wiki_bookstack_db_admin_password: "{{ wiki_bookstack_db_admin_password | default(lookup('ansible.builtin.password', '/dev/null length=32 chars=ascii_letters,digits')) }}"
  wiki_bookstack_keycloak_client_secret: "{{ wiki_bookstack_keycloak_client_secret | default(lookup('ansible.builtin.password', '/dev/null length=32 chars=ascii_letters,digits')) }}"
wiki_bookstack_db_admin_password: "{{ ansible_local.wiki_bookstack_secrets.wiki_bookstack_db_admin_password | default(ansible_local.secrets.wiki_bookstack_db_admin_password) }}"
wiki_bookstack_keycloak_client_secret: "{{ ansible_local.wiki_bookstack_secrets.wiki_bookstack_keycloak_client_secret | default(ansible_local.secrets.wiki_bookstack_keycloak_client_secret) }}"
