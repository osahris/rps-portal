---
version: "3"

networks:
  {{ traefik_proxy_network }}:
    external: true

volumes:
  certs:

services:
  traefik:
    image: traefik:v2.8
    restart: unless-stopped #"{{traefik_copy_static_config_task.changed}}"
    logging:
      options:
        max-size: 5m
    networks:
      - {{ traefik_proxy_network }}
    ports:
      - 80:80
      - 443:443
    volumes:
      - "/app/proxy/traefik:/etc/traefik:ro"
      # Use if a volume with ssl-certs is preferable. Uncomment relative part in defaults/main.yaml
      # - "{{traefik_ssl_certs_docker_volume_name|default("put a volume name if needed")}}}:/ssl-certs"
      # Use if a folder with ssl-certs is preferable. Uncomment relative part in defaults/main.yaml
      - certs:/ssl-certs/"
