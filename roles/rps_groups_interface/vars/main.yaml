---
remote_path: "/srv/{{rps_groups_interface_service_name}}"

rps_groups_interface_suite_config:
  project_id: "rps"
  project_name: "Test Suite"
  project_logo: "@/assets/logos/num-hub.svg"
  interface_title: "RPS Gruppeninterface"
  interface_heading: "RPS Gruppeninterface"
  language: "de"
  keycloak_url: "https://{{keycloak_service_name}}/"
  keycloak_realm: "{{keycloak_realm}}"
  keycloak_api_url: "https://{{keycloak_service_name}}/admin/realms/{{keycloak_realm}}"
  keycloak_client_id: "{{ rps_groups_interface_keycloak_client_id }}"
  user_attributes: "{{user_attributes}}"
  user_email_label: "{{user_email_label }}"
  user_first_name_label: "{{user_first_name_label}}"
  user_import_group_membership_label: "{{user_import_group_membership_label}}"
  user_import_group_owner_label: "{{user_import_group_owner_label}}"
  user_last_name_label: "{{user_last_name_label}}"
  user_username_label: "{{user_username_label}}"
  group_attributes:
    - key: name
      type: textfield
      readonly: false
      label: Groupname
      rules:
        - required
      maxLength: 20
    - key: title
      type: textfield
      label: Titel
      readonly: false
      rules:
        - required
      maxLength: 20
    - key: description
      type: textfield
      label: Beschreibung
      readonly: false
      rules: []
      maxLength: 90
    - key: icon
      type: autocomplete-icon
      label: Icon
      readonly: false
      rules: []
      maxLength: 0
    - key: membership_source
      type: autocomplete-membership-source
      label: Membership source
      readonly: false
      rules:
        - required
    - key: group_hierachy_type
      type: autocomplete-group-hierachy-type
      label: Hierachy Types
      readonly: false
      rules: []
    - key: group_hierachy_children
      type: autocomplete-group-hierachy-children
      label: Hierachy Child
      readonly: false
      rules: []
  membership_sources:
    - name: accounts
      description: Manually add and delete users
      type: keycloak
      membership_editable: true
    - name: accounts/profile
      description: Group users by account profile fields
      type: keycloak_profile
      membership_editable: false
    - name: group_hierachy
      description: Group users by group hierachy
      type: group_hierachy
      membership_editable: false+
  membership_sources_hierachy: 
    - name: union
      description: Manually add and delete users
      type: group_hierachy_type
      membership_editable: false
    - name: intersection
      description: Group users by account profile fields
      type: group_hierachy_type
      membership_editable: false

rps_groups_interface_traefik_router:
  rule: "Host(`{{rps_groups_interface_service_name}}`)"
  entrypoints: websecure
  service: "{{rps_groups_interface_service_name}}"
  # middlewares:
  #   - oauth2

rps_groups_interface_traefik_service:
  loadBalancer:
    servers:
      - url: http://{{rps_groups_interface_service_name|replace('.', '')}}_web_1
rps_groups_interface_traefik_dynamic_config:
  http:
    routers: "{{ { rps_groups_interface_service_name : rps_groups_interface_traefik_router  } }}"
    services: "{{ { rps_groups_interface_service_name : rps_groups_interface_traefik_service } }}"
