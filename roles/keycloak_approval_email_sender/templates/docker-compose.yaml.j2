---
version: "3.4"

networks:
  proxy:
    external: true
  keycloak-internal:

volumes:
  postgres:

services:  
  keycloak-registration-email-sync:
    image: {{keycloak_sync_container_image}}:{{keycloak_sync_container_version}}
    restart: unless-stopped
    networks:
      - proxy
    volumes:
      - ./config.yaml:/opt/rps-admin-tools/config.yaml:ro
    entrypoint: ''
    environment:
      - SLEEP_MINUTES=5
    command: /opt/rps-admin-tools/command_loop.sh -c /opt/rps-admin-tools/config.yaml sync registration --verbose
