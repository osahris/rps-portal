---
remote_path: "/app/{{keycloak_service_name}}"


keycloak_secrets:
  keycloak_admin_password: "{{ keycloak_admin_password  | default(lookup('ansible.builtin.password', '/dev/null length=32 chars=ascii_letters,digits')) }}"
  keycloak_postgres_password: "{{ keycloak_postgres_password | default(lookup('ansible.builtin.password', '/dev/null length=32 chars=ascii_letters,digits')) }}"


keycloak_traefik_dynamic_config:
  http:
    routers:
      keycloak:
        rule: "Host(`{{keycloak_service_name}}`)"
        entrypoints: websecure
        service: keycloak
        tls:
          certresolver: letsencrypt
    services:
      keycloak:
        loadBalancer:
          servers:
            - url: "http://{{ keycloak_service_name|replace('.', '') }}_keycloak_1:8080"


## Parameters for the data import
keycloak_import_realm_name:        "numhub"
keycloak_import_path:              "{{ remote_path }}"
keycloak_import_service_name:      "{{ keycloak_service_name }}"
keycloak_import_docker_container:  "{{ keycloak_import_service_name|replace('.','') }}_keycloak_1"
keycloak_import_postgres_password: "{{ ansible_local[keycloak_import_service_name].keycloak_postgres_password }}"

# ToDo
# A flag to import/not import should be added