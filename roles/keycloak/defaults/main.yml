---
keycloak_service_name: "keycloak.{{ inventory_hostname }}"
keycloak_protocol: "https"
keycloak_frontend_url: "{{ keycloak_protocol }}://{{ keycloak_service_name }}"

keycloak_container_image: registry.gitlab.com/idcohorts/rps/keycloak-docker
keycloak_container_version: main

keycloak_realm: users

# keycloak_smtp_host: mail.example.com
keycloak_smtp_port: 587
# keycloak_smtp_from: admin@test-discourse.idcohorts.net

keycloak_validate_certs: true
keycloak_with_proxy_network: true
keycloak_proxy_network: proxy

keycloak_registration_form_rules: {}
keycloak_registration_form_pages: {}
keycloak_registration_form_fields: {}

keycloak_admin_username: admin

keycloak_secrets:
  keycloak_admin_password: "{{ keycloak_admin_password  | default(lookup('ansible.builtin.password', '/dev/null length=32 chars=ascii_letters,digits')) }}"
  keycloak_postgres_password: "{{ keycloak_postgres_password | default(lookup('ansible.builtin.password', '/dev/null length=32 chars=ascii_letters,digits')) }}"
keycloak_admin_password: "{{ ansible_local[keycloak_service_name].keycloak_admin_password | default(ansible_local.secrets.keycloak_admin_password) }}"
keycloak_postgres_password: "{{ ansible_local[keycloak_service_name].keycloak_postgres_password | default(ansible_local.secrets.keycloak_postgres_password) }}"
