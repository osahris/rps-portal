---
keycloak_service_name: accounts.{{ rps_dns_suffix }}

keycloak_protocol: "https"
keycloak_frontend_url: "{{ keycloak_protocol }}://{{ keycloak_service_name }}"

keycloak_container_image: quay.io/keycloak/keycloak
keycloak_container_version: 21.0

# keycloak_smtp_host: mail.example.com
keycloak_smtp_port: 587
# keycloak_smtp_from: admin@test-discourse.idcohorts.net

keycloak_import: false

keycloak_validate_certs: true
keycloak_with_proxy_network: true
keycloak_proxy_network: proxy

keycloak_registration_form_rules: {}
keycloak_registration_form_pages: 
  - id: page-1
    heading: Persönliche Angaben
    form_elements:

    # Formularitems zu den persönlichen Angabe
    - type: dropdown
      id: anrede
      attribute: Anrede
      title: Anrede
      required: true
      default: Wählen Sie eine von Ihnen gewünschte Anrede aus
      options:
        - value: Sehr geehrte Frau
          description: Sehr geehrte Frau
        - value: Sehr geehrter Herr
          description: Sehr geehrter Herr
        - value: Sehr geehrte*
          description: Sehr geehrte*
        - value: Guten Tag
          description: Guten Tag
    - type: firstName
      id: first-name
    - type: lastName
      id: last-name
    - type: email
      id: email
      description: Bitte verwenden Sie Ihre <strong>dienstliche E-Mailadresse</strong>!
  - id: page-2
    heading: Organisation
    form_elements:
    - type: text
      attribute: Organisation
      title: Organisation
    - type: text
      attribute: Abteilung
      title: Abteilung
    - type: text
      attribute: Position
      title: Position
    - type: text
      attribute: ORCID
      title: ORCID
      default: 0123-4567-8901-2345
  - id: page-3
    heading: Anmeldedaten
    form_elements:
    - type: username
      description: 'Formatvorgabe: vorname.nachname'
    - type: password
      description: Mindestens 10 Zeichen, mindestens ein Groß- und Kleinbuchstabe, sowie eine Zahl.

keycloak_registration_form_fields: {}

keycloak_admin_username: admin

keycloak_admin_password: "{{ ansible_local[keycloak_service_name].keycloak_admin_password | default(ansible_local.secrets.keycloak_admin_password) }}"
keycloak_postgres_password: "{{ ansible_local[keycloak_service_name].keycloak_postgres_password | default(ansible_local.secrets.keycloak_postgres_password) }}"

user_attributes: 
- {key: Anrede, label: Anrede}
- {key: Titel, label: Titel}
- {key: Ort, label: Ort}
- {key: Institution, label: Institution}
- {key: Abteilung, label: Abteilung}
- {key: Telefon, label: Telefon}
user_email_label: E-Mail
user_first_name_label: Vorname (fakultativ)
user_import_group_membership_label: Gruppen
user_import_group_owner_label: Eigentümer Gruppen
user_last_name_label: Name
user_username_label: Nutzername (vorname.nachname)
