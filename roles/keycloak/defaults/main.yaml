---
keycloak_service_name: accounts.{{ rps_dns_suffix }}

keycloak_protocol: "https"
keycloak_frontend_url: "{{ keycloak_protocol }}://{{ keycloak_service_name }}"

keycloak_deploy: true
keycloak_export: false
keycloak_import: false
keycloak_export_to_controler: false
keycloak_import_from_controler: false

keycloak_container_image: quay.io/keycloak/keycloak
keycloak_container_version: 21.0

keycloak_docker_compose_profile: full
permission_sync_keycloak_client_realm: rps
keycloak_sync_container_image: registry.gitlab.com/idcohorts/rps/rps-admin-tools
keycloak_sync_container_version: dev
permission_sync_keycloak_client_client_id: "permission-sync-{{keycloak_service_name}}"
keycloak_with_permission_sync_keycloak_client: true
permission_sync_keycloak_client_auth_keycloak_url: "{{keycloak_service_name}}"
permission_sync_keycloak_client_auth_client_id: admin-cli
permission_sync_keycloak_client_auth_realm: "{{keycloak_management_realm|default('master')}}"
permission_sync_keycloak_client_auth_username: admin
permission_sync_keycloak_client_auth_password: "{{keycloak_admin_password}}"
permission_sync_keycloak_client_validate_certs: true


# keycloak_smtp_host: mail.example.com
keycloak_smtp_port: 587
# keycloak_smtp_from: admin@test-discourse.idcohorts.net

keycloak_validate_certs: true
keycloak_with_proxy_network: true
keycloak_proxy_network: proxy

keycloak_admin_username: admin

keycloak_admin_password: "{{ ansible_local[keycloak_service_name].keycloak_admin_password  }}"
keycloak_postgres_password: "{{ ansible_local[keycloak_service_name].keycloak_postgres_password }}"
permission_sync_keycloak_client_secret: "{{ ansible_local[keycloak_service_name].permission_sync_keycloak_client_secret }}"