---
secrets_fact: # this are the vars that are going to be saved in the local vars file
  keycloak_postgres_password: "{{ keycloak_postgres_password }}"
  keycloak_admin_password: "{{ keycloak_admin_password }}"
  keycloak_subrealm_client_secret: "{{ keycloak_subrealm_client_secret }}"
  oauth2_proxy_client_secret: "{{ oauth2_proxy_client_secret }}"
  oauth2_proxy_cookie_secret: "{{ oauth2_proxy_cookie_secret }}"

keycloak_postgres_password: "{{ ansible_local.secrets.keycloak_postgres_password | default(lookup('ansible.builtin.password', '/dev/null length=16 chars=ascii_letters,digits')) }}"
keycloak_admin_password: "{{ ansible_local.secrets.keycloak_admin_password | default(lookup('ansible.builtin.password', '/dev/null length=16 chars=ascii_letters,digits')) }}"
keycloak_subrealm_client_secret: "{{ ansible_local.secrets.keycloak_admin_password | default(lookup('ansible.builtin.password', '/dev/null length=16 chars=ascii_letters,digits')) }}"
keycloak_management_password: "{{ keycloak_admin_password }}"
oauth2_proxy_client_secret: "{{ ansible_local.secrets.oauth2_proxy_client_secret | default(lookup('ansible.builtin.password', '/dev/null length=16 chars=ascii_letters,digits')) }}"
oauth2_proxy_cookie_secret: "{{ ansible_local.secrets.oauth2_proxy_cookie_secret | default(lookup('ansible.builtin.password', '/dev/null length=16 chars=ascii_letters,digits')) }}"
